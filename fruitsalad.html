<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="author" content="Iia Haavanoksa">
	<link href="style.css" rel="stylesheet" type="text/css">

	<title>Fruit Salad Assignment</title>

<style>

</style>

</head>
<body> 
	<h3>Shopping List for Fruit Salad</h3>

	<form>
		<p>
			<label>Product:</label> 
			<input type="text" id="product" size="20">
		</p>
		<p>
			<label>Price:</label> 
			<input type="number" id="price" size="20">
		</p>
		<p>
			<input type="button" value="Add" onclick="add()">
		</p>
	</form>

	<!-- The list goes here -->
	<div id="list"></div>
	
	<script>
		let products = [];
		let minPrice = Number.MAX_VALUE;
		let maxPrice = Number.MIN_VALUE;
		let minProduct = "";
		let maxProduct = "";

		// Function called by pushing the button
		function add() {
			// Creating the variables
			let product = document.getElementById("product").value;
			let price = document.getElementById("price").value;

			// Adding product-price pair to products-list
			let obj = {"product" : product, "price": price};
			products.push(obj);

			// Checking the list
			console.log(products);

			// Calling for function to list the products
			showList();
		}

		// Function finding the key with certain value
		function getKeyByValue(object, value) {
			return Object.keys(object).find(key => object[key] === value);
		}

		function showList() {
			// Variable where the list is written as string
			let productList = "";

			// Listing the products
			products.forEach(key =>
				productList += key.product + " (" + key.price + " euros)<br>"
			);

			// Adding all the prices to a new list
			const prices = products.map(product => product.price);

			// Finding the cheapest and most expensive price from the prices-list
			maxPrice = Math.max(...prices);
			minPrice = Math.min(...prices);

			// Finding the products that match the max and min prices
			maxProduct = getKeyByValue(products, maxPrice);
			console.log("maxProduct: " + maxProduct);
			minProduct = getKeyByValue(products, minPrice);

			// Checking the results
			console.log("Halvin tuote: " + minProduct);
			console.log("Halvin hinta: " + minPrice);
			console.log("Kallein tuote: " + maxProduct);
			console.log("Kallein hinta: " + maxPrice);

			// Listing the products on the html page
			document.getElementById("list").innerHTML = "<p>" + productList + "</p> <p>The priciest product is " + maxProduct + " (" + maxPrice + " euros)</p><p>The cheapest product is " + minProduct + " (" + minPrice + " euros)";
		}
	</script>
</body>
</html>